const jsonInput=document.getElementById('json-input');const jsonOutput=document.getElementById('json-output');const beautifyBtn=document.getElementById('beautify-btn');const minifyBtn=document.getElementById('minify-btn');const clearBtn=document.getElementById('clear-btn');const copyBtn=document.getElementById('copy-btn');const toast=document.getElementById('toast');beautifyBtn.addEventListener('click',()=>processJSON(2));minifyBtn.addEventListener('click',()=>processJSON(0));clearBtn.addEventListener('click',()=>{jsonInput.value='';jsonOutput.innerHTML='';});copyBtn.addEventListener('click',copyToClipboard);function processJSON(indent){const raw=jsonInput.value.trim();if(!raw){jsonOutput.innerHTML='';return;}try{const parsed=JSON.parse(raw);if(indent===0){jsonOutput.textContent=JSON.stringify(parsed,null,0);return;}const formatted=JSON.stringify(parsed,null,indent);jsonOutput.innerHTML=syntaxHighlight(formatted);}catch(e){jsonOutput.innerHTML=`<span class="error">Error: ${e.message}</span>`;}}function syntaxHighlight(json){if(typeof json !=='string'){json=JSON.stringify(json,undefined,2);}json=json.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');return json.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(match){let cls='number';if(/^"/.test(match)){if(/:$/.test(match)){cls='key';}else{cls='string';}}else if(/true|false/.test(match)){cls='boolean';}else if(/null/.test(match)){cls='null';}return `<span class="${cls}">${match}</span>`;});}function copyToClipboard(){const text=jsonOutput.textContent;if(!text)return;navigator.clipboard.writeText(text).then(()=>{showToast();}).catch(err=>{console.error('Failed to copy: ',err);});}function showToast(){toast.classList.remove('hidden');setTimeout(()=>{toast.classList.add('hidden');},2000);}